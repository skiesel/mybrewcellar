{{template "top.html" .}}

<div id="alert" class="alert" role="alert" {{ if eq .Error "" }} style="display:none;" {{ end }}>{{ .Error }}</div>

<div class="row">
	<div class="col-lg-6">
		<form class="form-horizontal">
			<div class="form-group">
				<label class="col-sm-2 control-label">username:</label>
				<div class="col-sm-10">
					<input class="form-control" type="text" id="username" name="username" value="{{ .Account.User.UserID }}" />
				</div>
			</div>
			<div class="form-group" style="text-align:center;">
	      <span class="input-group-btn">
	        <button id="update-account-submit" class="btn btn-default" type="button">update!</button>
	      </span>
	    </div>
		</div>
	</div>
</div>

<script>

$('#update-account-submit').click(function() {
		$.post(
			"api/update-account",
			{ username : $('#username').val() },
			function(data) {
				var obj = $.parseJSON(data);
				if(obj.Status == "SUCCESS") {
					$('#username').val(obj.Data.Username);
					showError("Successfully updated username : &quot;" + obj.Data.Username + "&quot;", SUCCESS);
				}
				else {
					showError("Failed to update username (" + obj.Error + ")");
				}
			});
	});

</script>

{{template "bottom.html" .}}